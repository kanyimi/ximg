{% load static %}
{% load i18n %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noindex, nofollow, noarchive, nosnippet">

    <!-- ÐÐ½Ð³Ð»Ð¸Ð¹ÑÐºÐ°Ñ Ð²ÐµÑ€ÑÐ¸Ñ -->
    <meta name="description" content="{% translate 'File exchange service with a secure feature to remove metadata.' %}">
    <title>
        {% block title %}
            {% translate "File Exchange â€” Security and Metadata Removal" %}
        {% endblock %}
    </title>


    <link rel="stylesheet" href="{% static 'photohostapp/css/style.css' %}">
    <link rel="icon"  href="{% static 'source/Favicon.svg' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    {% block extra_css %}{% endblock %}
</head>
<body>

<ul class="nav-links nav-links--center-donate">
  <li class="nav-first">
        <a href="{% url 'photohostapp:create' %}"
           style="display: inline-flex; align-items: center; gap: 6px; font-size: 30px;">
          <img src="{% static 'source/Favicon.svg' %}"
               alt="Tor"
               style="height:44px; width:auto;">
          img
        </a>
  </li>

    <!-- Donate is a flexible middle slot -->
<li class="nav-mid">
  <a href="#"
     class="nav-donate-btn nav-donate-pill"
     data-bs-toggle="modal"
     data-bs-target="#donateModal">


    <svg class="nav-donate-heart" height="28" width="28" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
      <path d="M0 0H24V24H0z" fill="none"></path>
      <path d="M16.5 3C19.538 3 22 5.5 22 9c0 7-7.5 11-10 12.5C9.5 20 2 16 2 9c0-3.5 2.5-6 5.5-6C9.36 3 11 4 12 5c1-1 2.64-2 4.5-2z"></path>
    </svg>
       <span class="nav-donate-text" style="color:#227851;">{% translate "Donate" %}</span>
  </a>
</li>


  <li><a href="{% url 'secret_notes:create' %}">
    <i class="fas fa-lock" style="font-size:24px"></i> {% translate "secure note" %}
  </a></li>

<li class="nav-lang">
  <form action="{% url 'set_language' %}" method="post">
    {% csrf_token %}
      <input type="hidden" name="next" value="{{ request.get_full_path }}">
    <i class="fa-solid fa-globe" style="font-size:24px; margin-right:6px;"></i>
    {% get_current_language as LANGUAGE_CODE %}

    <select name="language" onchange="this.form.submit()">
      <option value="en" {% if LANGUAGE_CODE == 'en' %}selected{% endif %}>EN</option>
      <option value="ru" {% if LANGUAGE_CODE == 'ru' %}selected{% endif %}>RU</option>
      <option value="es" {% if LANGUAGE_CODE == 'es' %}selected{% endif %}>ES</option>
      <option value="uk" {% if LANGUAGE_CODE == 'uk' %}selected{% endif %}>UA</option>
    </select>
  </form>
</li>

  <li><a href="http://ximg2v3xdwefqhlzs2stdhb5zvnnacnbaopgblsjlrw4ej3ewruexlqd.onion">
    <img src="{% static 'source/Tor.svg' %}" alt="Tor" style="height:22px; width:auto;">
    .onion
  </a></li>
</ul>

{% include "includes/donate_modal.html" %}

  {% include 'includes/alerts.html' %}
<div class="container-fluid">

<div class="donate-cta">
    <svg class="nav-donate-heart" height="28" width="28" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
      <path d="M0 0H24V24H0z" fill="none"></path>
      <path d="M16.5 3C19.538 3 22 5.5 22 9c0 7-7.5 11-10 12.5C9.5 20 2 16 2 9c0-3.5 2.5-6 5.5-6C9.36 3 11 4 12 5c1-1 2.64-2 4.5-2z"></path>
    </svg>
  <span>
    {% translate "Ximg is free to use because of donations from people like you." %}
  </span>

  <a href="#"
     class="donate-cta__link"
     data-bs-toggle="modal"
     data-bs-target="#donateModal"
     role="button">
    {% translate "Donate now" %}
  </a>
</div>
    <br>
    {% block content %}{% endblock %}

    <!-- Footer (ALWAYS at bottom) -->

<div class="footer">
    <footer class="site-footer">
        <div>
                <a href="#"
                   data-bs-toggle="modal"
                   data-bs-target="#ximgMirrorsModal"
                   class="mirrors-link">
                    <i class="fa fa-link"></i>
                    <b><span>{% translate "All mirrors of" %} ximg</span></b>
                </a>

        </div>
    </footer>
</div>


{% include "includes/ximg_mirrors_modal.html" %}
<script src="{% static 'photohostapp/js/main1.js' %}"></script>
{% block extra_js %}{% endblock %}
<script>
  setTimeout(() => {
    document.querySelectorAll('.django-alert').forEach(alert => {
      const bsAlert = bootstrap.Alert.getOrCreateInstance(alert);
      bsAlert.close();
    });
  }, 5000);


document.getElementById("copyAllMirrors").addEventListener("click", function () {
    const links = Array.from(
        document.querySelectorAll(".mirror-list a")
    ).map(a => a.href).join("\n");

    navigator.clipboard.writeText(links).then(() => {
        this.innerText = "âœ… Copied!";
        setTimeout(() => {
            this.innerText = "ðŸ“‹ Copy all mirrors to clipboard";
        }, 2000);
    });
});


  (function () {
    if (window.__donatePulseBound) return;
    window.__donatePulseBound = true;

    function getBtn() {
      return document.querySelector(".nav-donate-pill");
    }

    function pulseOnce(btn) {
      if (!btn) return;

      // don't pulse if modal is open
      const modalOpen = document.querySelector("#donateModal.show");
      if (modalOpen) return;

      btn.classList.add("is-attention");
      setTimeout(() => btn.classList.remove("is-attention"), 1600);
    }

    // start interval
    setInterval(() => {
      pulseOnce(getBtn());
    }, 5000);

    // optional: small delay after load so first pulse is noticeable
    window.addEventListener("load", () => {
      setTimeout(() => pulseOnce(getBtn()), 1200);
    });
  })();
</script>

</body>
</html>
